<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expectation and Linearity</title>
    
    <!-- MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background: black;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: black;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .back-button {
            display: inline-block;
            background: black;
            color: white;
            border: 1px solid #666;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
            transition: background 0.3s ease;
        }
        
        .back-button:hover {
            background: #666;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .problem {
            background: #1a1a1a;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            color: white;
            line-height: 1.8;
        }
        
        /* Green to Yellow gradient (A♣ to 7♣) */
        .problem:nth-child(3) { border-left-color: #00ff00; } /* A♣ - Pure Green */
        .problem:nth-child(4) { border-left-color: #2aff00; } /* 2♣ - Green-Yellow */
        .problem:nth-child(5) { border-left-color: #55ff00; } /* 3♣ - Green-Yellow */
        .problem:nth-child(6) { border-left-color: #80ff00; } /* 4♣ - Yellow-Green */
        .problem:nth-child(7) { border-left-color: #aaff00; } /* 5♣ - Yellow-Green */
        .problem:nth-child(8) { border-left-color: #d5ff00; } /* 6♣ - Yellow */
        .problem:nth-child(9) { border-left-color: #ffff00; } /* 7♣ - Pure Yellow */
        
        /* Yellow to Red gradient (8♣ to K♣) */
        .problem:nth-child(10) { border-left-color: #ffd500; } /* 8♣ - Yellow-Orange */
        .problem:nth-child(11) { border-left-color: #ffaa00; } /* 9♣ - Orange */
        .problem:nth-child(12) { border-left-color: #ff8000; } /* 10♣ - Orange-Red */
        .problem:nth-child(13) { border-left-color: #ff5500; } /* J♣ - Red-Orange */
        .problem:nth-child(14) { border-left-color: #ff2a00; } /* Q♣ - Red */
        .problem:nth-child(15) { border-left-color: #ff0000; } /* K♣ - Pure Red */
        
        .problem h3 {
            font-size: 1.4em;
            margin-top: -3px;
            margin-bottom: -10px;
        }
        
        /* Match h3 colors to border colors */
        .problem:nth-child(3) h3 { color: #00ff00;  } /* A♣ */
        .problem:nth-child(4) h3 { color: #2aff00; } /* 2♣ */
        .problem:nth-child(5) h3 { color: #55ff00; } /* 3♣ */
        .problem:nth-child(6) h3 { color: #80ff00; } /* 4♣ */
        .problem:nth-child(7) h3 { color: #aaff00; } /* 5♣ */
        .problem:nth-child(8) h3 { color: #d5ff00; } /* 6♣ */
        .problem:nth-child(9) h3 { color: #ffff00; } /* 7♣ */
        .problem:nth-child(10) h3 { color: #ffd500; } /* 8♣ */
        .problem:nth-child(11) h3 { color: #ffaa00; } /* 9♣ */
        .problem:nth-child(12) h3 { color: #ff8000; } /* 10♣ */
        .problem:nth-child(13) h3 { color: #ff5500; } /* J♣ */
        .problem:nth-child(14) h3 { color: #ff2a00; } /* Q♣ */
        .problem:nth-child(15) h3 { color: #ff0000; } /* K♣ */
        
        .probability-scenario {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            line-height: 1.6;
            color: #ccc;
        }
        
        .answer-section {
            margin: 20px 0;
        }
        
        input[type="number"], input[type="text"] {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            width: 200px;
        }
        
        button {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
        }
        
        button:hover {
            background: #218838;
        }
        
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .tab-indent {
            padding-left: 2em;
            display: block;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">← Back to Jane Street Cards</a>
        
        <h1>♦ Classical and Conditional Probability</h1>
        
        <div class="problem">
            <h3>A♦</h3>
            <p>
                A standard deck of cards is shuffled. What is the chance that the third card 
                from the top is either a diamond or an ace?
            </p>
            <div class="answer-section">
                <input type="number" id="answer1" placeholder="Answer">
                <button onclick="checkAnswer('1', 7)">Check Answer</button>
                <div id="result1" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>2♦</h3>
            <p>
                If you draw $13$ random cards from a standard deck, what is the chance
                that they are all of the same suit?
            </p>
            <div class="answer-section">
                <input type="number" id="answer2" placeholder="Answer">
                <button onclick="checkAnswer('2', 7)">Check Answer</button>
                <div id="result2" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>3♦</h3>
            <p>
                We shuffle a deck of cards and I deal you the <strong>3♦, 4♦, and 5♦</strong>
                I look at the next card and tell you that it is between 3 and 8 (inclusive).
                How likely is it that this card is a ♦?
            </p>
            <div class="answer-section">
                <input type="number" id="answer3" placeholder="Answer">
                <button onclick="checkAnswer('3', 7)">Check Answer</button>
                <div id="result3" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>4♦</h3>
            <p>
                The <strong>2♦, 3♦, and 4♦</strong> are face-down in random order. You want to select 
                the <strong>4♦</strong>. You point to the leftmost card. A gust of wind blows, flipping
                the rightmost card and revealing that it is the <strong>2♦</strong>. Do you switch
                your choice from the leftmost to the middle?
            </p>
            <div class="answer-section">
                <input type="number" id="answer4" placeholder="Answer">
                <button onclick="checkAnswer('4', 7)">Check Answer</button>
                <div id="result4" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>5♦</h3>
            <p>
                I have all $13$♦s. We both want to end the game with the <strong>5♦</strong>. You 
                randomly select one of my cards but cannot look at it. I look at my cards and 
                then place $11$ face up. The <strong>5♦</strong> is not among them. 
                <span class="tab-indent">a) Should you trade the card you initially chose for my 
                    remaining card?
                </span>
                <span class="tab-indent">b) What is the chance you find the <strong>5♦</strong> if so?</span>
            </p>
            <div class="answer-section">
                <input type="number" id="answer5a" placeholder="a)">
                <button onclick="checkAnswer('5a', 7)">Check Answer</button>
                <div id="result5a" class="result" style="display: none;"></div>
            </div>
            <div class="answer-section">
                <input type="number" id="answer5b" placeholder="b)">
                <button onclick="checkAnswer('5b', 14)">Check Answer</button>
                <div id="result5b" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>6♦</h3>
            <p>
                You are given a deck of cards that is equally likely to either be
                perfectly shuffled or brand new (i.e. ordered A♦-K♦, A♠-K♠, etc). You draw the top
                3 cards and they are the <strong>A♦, 2♦, and 3♦</strong> in that order. How much
                more likely is the deck to be brand new vs. shuffled?
            </p>
            <div class="answer-section">
                <input type="number" id="answer6" placeholder="Answer">
                <button onclick="checkAnswer('6', 7)">Check Answer</button>
                <div id="result6" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>7♦</h3>
            <p>
                You are holding a random card from a standard deck. If you have a ♦, you truthfully
                answer questions 90% of the time and lie 10% of the time. If you dont have a ♦, you 
                truthfully answer questions 40% of the time and lie 60% of the time. I ask 
                "Do you have a ♦?" and you answer "Yes." What is the chance you have a ♦?
            </p>
            <div class="answer-section">
                <input type="number" id="answer7" placeholder="Answer">
                <button onclick="checkAnswer('7', 7)">Check Answer</button>
                <div id="result7" class="result" style="display: none;"></div>
            </div>
        </div>


        <div class="problem">
            <h3>8♦</h3>
            <p>
                Arrange the <strong>13♣'s</strong> in random order. How many times do you expect the 
                sequence to change direction (increasing to decreasing or vice versa)?
            </p>
            <div class="answer-section">
                <input type="number" id="answer8" placeholder="Answer">
                <button onclick="checkAnswer('8', 7)">Check Answer</button>
                <div id="result8" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>9♦</h3>
            <p>
                A very large deck of $2N+1$ cards is cut at one of its $2N$ gaps randomly. 
                As a fuction of $N$, on average how many cards are in the smaller pile? 
                What is the expected ratio of the size of the larger pile to the smaller pile?
            </p>
            <div class="answer-section">
                <input type="number" id="answer9" placeholder="Answer">
                <button onclick="checkAnswer('9', 7)">Check Answer</button>
                <div id="result9" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>10♦</h3>
            <p>
                Draw cards from a shuffled deck until you draw the <strong> J♣, Q♣,</strong> and 
                <strong> K♣</strong>. How many draws will it take on average?
            </p>
            <div class="answer-section">
                <input type="number" id="answer10" placeholder="Answer">
                <button onclick="checkAnswer('10', 7)">Check Answer</button>
                <div id="result10" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>J♦</h3>
            <p>
                We have $2N$ cards: 1 through $N$ of both ♣ and ♠. Remove the 1♣ and a random ♠. 
                Remove a pair of cards: the 2♣ and an associated ♠, the 3♣ and an associated ♠
                (the 2♠ if you can find it, or else a random ♠). Continue similarly (with the 
                3♣, 4♣, etc) until all cards are paired and removed.
                <span class="tab-indent">a) What's the chance $N$♣ and $N$♠ form a pair?</span>
                <span class="tab-indent">b) On average, how many pairs have matching rank?</span>
            </p>
            <div class="answer-section">
                <input type="number" id="answerJa" placeholder="a)">
                <button onclick="checkAnswer('Ja', 7)">Check Answer</button>
                <div id="resultJa" class="result" style="display: none;"></div>
            </div>
            <div class="answer-section">
                <input type="number" id="answerJb" placeholder="b)">
                <button onclick="checkAnswer('Jb', 14)">Check Answer</button>
                <div id="resultJb" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>Q♦</h3>
            <p>
                I deal out $MN$ cards in an $M\times N$ grid, some face up and some face down.
                You want to maximize the number of cards face up, but you are only allowed 
                to flip a full row or full column at a time (as many times as you like). How many
                cards can you get face up at the same time no matter how I arrange the cards to
                start for:
                <span class="tab-indent">a) $M = N$ ?</span>
                <span class="tab-indent">b) $M = 2^N$ ?</span>
            </p>
            <div class="answer-section">
                <input type="number" id="answerQa" placeholder="a)">
                <button onclick="checkAnswer('Qa', 7)">Check Answer</button>
                <div id="resultQa" class="result" style="display: none;"></div>
            </div>
            <div class="answer-section">
                <input type="number" id="answerQb" placeholder="b)">
                <button onclick="checkAnswer('Qb', 14)">Check Answer</button>
                <div id="resultJb" class="result" style="display: none;"></div>
            </div>
        </div>

        <div class="problem">
            <h3>K♦</h3>
            <p>
                You and I are playing a strange deck of cards that consists of 1 through $N$ ♣'s.
                I remove $r$ cards from the deck. Without knowing which $r$ I removed, how large 
                of a sum-free subset can you promise me you can find in your cards? (A set $S$ is
                sum-free if there does not exist $s_1, s_2, s_3 \in S$ with $s_1 + s_2 = s_3$).
            </p>
            <div class="answer-section">
                <input type="number" id="answerK" placeholder="Answer">
                <button onclick="checkAnswer('K', 7)">Check Answer</button>
                <div id="resultK" class="result" style="display: none;"></div>
            </div>
        </div>

    <script>
        function checkAnswer(problemNum, correctAnswer) {
            const userAnswer = parseFloat(document.getElementById(`answer${problemNum}`).value);
            const resultDiv = document.getElementById(`result${problemNum}`);
            
            resultDiv.style.display = 'block';
            
            const tolerance = 0.1;
            if (Math.abs(userAnswer - correctAnswer) <= tolerance) {
                resultDiv.className = 'result correct';
                resultDiv.textContent = '✅ Correct! Well done!';
            } else {
                resultDiv.className = 'result incorrect';
                resultDiv.textContent = `❌ Incorrect. The correct answer is ${correctAnswer}.`;
            }
        }
        
        function showHint(problemNum) {
            const hintDiv = document.getElementById(`hint${problemNum}`);
            hintDiv.style.display = hintDiv.style.display === 'none' ? 'block' : 'none';
        }
    </script>
</body>
</html>
